(this["webpackJsonplogic-social-influence"]=this["webpackJsonplogic-social-influence"]||[]).push([[0],{124:function(e,t,n){},269:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(62),a=n.n(o),r=(n(124),n(3)),i=n(20),s=n(38),l=n(2),b=n(118),u=n(119),d=n.n(u),j={width:.7,color:"#cccccc",dashes:!0},f={layout:{hierarchical:!1},edges:{smooth:!0,length:400,width:.9,color:"#007296",arrows:{to:{enabled:!1,scaleFactor:.5}}}},O=[Object(l.a)({from:"a",to:"a",arrows:"to",label:"0.1"},j),Object(l.a)({from:"a",to:"b",arrows:"to",label:"0.8"},j),Object(l.a)({from:"a",to:"c",arrows:"to",label:"0.1"},j),Object(l.a)({from:"b",to:"a",arrows:"to",label:"0.3"},j),Object(l.a)({from:"b",to:"b",arrows:"to",label:"0.4"},j),Object(l.a)({from:"b",to:"c",arrows:"to",label:"0.3"},j),Object(l.a)({from:"c",to:"a",arrows:"to",label:"0.2"},j),Object(l.a)({from:"c",to:"b",arrows:"to",label:"0.2"},j),Object(l.a)({from:"c",to:"c",arrows:"to",label:"0.6"},j)],p=[{id:"a",label:"a: p\u2191",opinion:"p\u2191"},{id:"b",label:"b: p\u2193",opinion:"p\u2193"},{id:"c",label:"c: p-",opinion:"p-"}],h=[{from:"a",to:"b"},{from:"a",to:"c"},{from:"b",to:"c"}],v=["p\u2191","p-","p\u2193"],g=n(0),m=function(e){var t=e.graph,n=Object(c.useState)(null),o=Object(r.a)(n,2),a=o[0],i=o[1],s=Object(c.useState)(null),l=Object(r.a)(s,2),b=(l[0],l[1]);Object(c.useEffect)((function(){t&&i(t)}),[t]);var u={select:function(e){var t=e.nodes,n=e.edges;console.log("Selected nodes:"),console.log(t),console.log("Selected edges:"),console.log(n)},doubleClick:function(e){e.pointer.canvas}};return Object(g.jsx)("div",{className:"graph-wrap",children:a&&Object(g.jsx)(d.a,{graph:a,options:f,events:u,style:{height:"600px",width:"550px",border:"1px solid #ccc"},getNetwork:function(e){return b(e)}})})},x=function(e){var t=e.initialModel,n=e.setCanUpdate,o=e.counter,a=Object(c.useState)(null),u=Object(r.a)(a,2),d=u[0],j=u[1];Object(c.useEffect)((function(){t&&o>1&&O()}),[o]),Object(c.useEffect)((function(){t&&j([t])}),[t]),Object(c.useEffect)((function(){t&&d&&n(!!f())}),[d,t]);var f=function(){var e=function(){var e=d[d.length-1],t=e.nodes,n=e.edges,c=n.filter((function(e){return!!e.label})),o=t.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},t.id,{}))}),{});return t.forEach((function(e){var n=e.id;c.filter((function(e){return e.from===n})).forEach((function(e){var c=e.to,a=e.label;console.log("@edge",e,o);var r=parseFloat(a),i=t.find((function(e){return e.id===c})).opinion;o[n][i]=void 0!==o[n][i]?parseFloat(o[n][i])+r:r}))})),{nextNodes:Object.entries(o).map((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1],o=Object.entries(c).reduce((function(e,t){return e[1]>t[1]?e:t})),a=Object(r.a)(o,2),i=a[0];return a[1],{id:n,label:"".concat(n,": ").concat(i),opinion:i}})),lastNodes:t,edges:n}}(),t=e.nextNodes,n=e.lastNodes,c=e.edges;return JSON.stringify(t)!==JSON.stringify(n)&&{nextNodes:t,lastNodes:n,edges:c}},O=function(){var e=f();if(e){var t=e.nextNodes,c=e.edges;j((function(e){return[].concat(Object(i.a)(e),[{nodes:t,edges:c}])}))}else n(!1)};return Object(g.jsx)("div",{className:"networks-container",children:t&&d&&Object(g.jsx)(b.Carousel,{showArrows:!0,centerMode:!0,selectedItem:d.length-1,autoPlay:!1,showStatus:!1,children:d.map((function(e,t){return Object(g.jsx)(m,{graph:e},t)}))})})},w=function(e){var t=e.setInitialModel,n=e.canUpdate,o=e.handleClickUpdate,a=Object(c.useState)(p),s=Object(r.a)(a,2),b=s[0],u=s[1],d=Object(c.useState)(O),j=Object(r.a)(d,2),f=j[0],m=j[1],x=Object(c.useState)(!1),w=Object(r.a)(x,2),S=w[0],N=w[1],C=function(){var e={nodes:b,edges:[].concat(Object(i.a)(h),Object(i.a)(f))};t(e),N(!0)};return Object(g.jsxs)("div",{className:"controls-container",children:[Object(g.jsx)("div",{children:b.map((function(e){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("span",{children:["a\u0433\u0435\u043d\u0442 ",e.id," \u0432\u0435\u0440\u0438\u0442, \u0447\u0442\u043e: "]}),Object(g.jsx)("select",{value:e.opinion,onChange:function(t){return function(e,t){var n=e.target.value,c=b.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{opinion:n,label:"".concat(e.id,": ").concat(n)}):e}));u(c)}(t,e.id)},children:v.map((function(e){return Object(g.jsx)("option",{value:e,children:e},e)}))})]})}))}),Object(g.jsx)("div",{children:f.map((function(e,t){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("span",{children:["\u0430\u0433\u0435\u043d\u0442 ",e.from," \u0432\u0435\u0440\u0438\u0442 ",e.to," \u043a\u0430\u043a:"," "]}),Object(g.jsx)("input",{type:"number",value:e.label,min:0,max:1,step:.1,onChange:function(t){return function(e,t,n){var c=f.map((function(c){return c.from===t&&c.to===n?Object(l.a)(Object(l.a)({},c),{},{label:e.target.value.toString()}):c}));m(c)}(t,e.from,e.to)}})]},t)}))}),Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:C,children:S?"\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c":"\u041d\u0430\u0447\u0430\u0442\u044c"}),Object(g.jsx)("button",{disabled:!S||!0!==n,onClick:o,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0435\u0442\u044c"})]})]})};n(268);var S=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],o=t[1],a=Object(c.useState)(null),i=Object(r.a)(a,2),s=i[0],l=i[1],b=Object(c.useState)(1),u=Object(r.a)(b,2),d=u[0],j=u[1];return Object(g.jsxs)("main",{children:[Object(g.jsx)(w,{canUpdate:n,handleClickUpdate:function(){j((function(e){return e+1}))},setInitialModel:l}),Object(g.jsx)(x,{initialModel:s,setCanUpdate:o,counter:d})]})};a.a.render(Object(g.jsx)(S,{}),document.getElementById("root"))}},[[269,1,2]]]);
//# sourceMappingURL=main.faa3f4bf.chunk.js.map